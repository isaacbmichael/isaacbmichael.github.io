<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>About — Isaac B. Michael</title>
    <meta
      name="description"
      content="Executive bio for Isaac B. Michael: research scientist, mathematical statistician, and program director."
    />
    <meta property="og:title" content="About — Isaac B. Michael" />
    <meta
      property="og:description"
      content="Data-driven strategy & execution across public health, education, and enterprise analytics."
    />
    <meta property="og:url" content="https://isaacbmichael.com/about/" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <link rel="canonical" href="https://isaacbmichael.com/about/" />
    <!-- Light theme color matches solid page bg -->
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#F2F7F8" />
    <!-- Dark brand color -->
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0B3F47" />
    <meta property="og:image" content="https://isaacbmichael.com/assets/og/home.png" />
    <meta name="twitter:image" content="https://isaacbmichael.com/assets/og/home.png" />
    
    <!-- Favicons / site icons (Safari-safe order: PNG/ICO first) -->
    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" type="image/png" sizes="24x24" href="/favicon-24x24.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <!-- <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"> -->

    <!-- Optional: dark-mode SVG (white glyph) -->
    <link rel="icon" type="image/svg+xml" href="/favicon-dark.svg" media="(prefers-color-scheme: dark)">

    <!-- iOS home-screen -->
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">

    <!-- Safari pinned tab -->
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0F5B66">

    <!-- PWA manifest (absolute paths inside) -->
    <link rel="manifest" href="/site.webmanifest">

    <!-- Preload logo variants for faster first paint -->
    <link
      rel="preload"
      href="/assets/brands/logo-tealroyal.svg"
      as="image"
      type="image/svg+xml"
      fetchpriority="high"
    />
    <link rel="preload" href="/assets/brands/logo-white.svg" as="image" type="image/svg+xml" />

    <style>
      /* ===== Design Tokens (Royal Teal) ===== */
      :root{
        --brand-blue-900:#0B3F47;  /* dark bar bg */
        --brand-blue-700:#0F5B66;  /* primary accents */
        --accent:var(--brand-blue-700);

        --ink:#111827;
        --muted:#5b6470;

        --bar-bg:#ffffff;
        --bar-fg:var(--brand-blue-900);
        --bar-border:#e5e7eb;

        /* Solid page background (very light teal) */
        --page-bg:#F2F7F8;

        /* Ring tinted to new accent */
        --ring:rgba(15,91,102,.35);

        --surface:#ffffff;
        --radius:14px;
        --w:1360px;
        --wrap-pad:clamp(12px,2vw,20px);
        --shadow:0 10px 20px rgba(17,24,39,.08), 0 2px 6px rgba(17,24,39,.04);
        --shadow-hover:0 16px 28px rgba(17,24,39,.12), 0 4px 12px rgba(17,24,39,.06);
        --avatar-size:96px;

        --drawer-bg:#ffffff;
        --drawer-fg:#111827;

        /* About page layout tokens */
        --band-space:28px;

        /* Section divider tokens (exact) */
        --divider-gap: 2px;
        --divider-edge-alpha: .12;
        --divider-center-alpha: .68;

        /* Anchor offset for sticky header */
        --anchor-offset: 76px;

        /* NEW: CTA spacing + mobile dock handling (parity with Home) */
        --cta-desktop-gap: 28px;   /* main’s bottom padding on desktop */
        --cta-mobile-gap: 14px;    /* visible space above dock on mobile */
        --dock-h: 90px;            /* fallback; JS sets real value */
      }
      @media (min-width:1600px){ :root{ --w:1440px } }

      /* Bars DARK variant (at top; toggled by hero observer) */
      body.bars-dark{
        --bar-bg:var(--brand-blue-900);
        --bar-fg:#ffffff;
        --bar-border:rgba(255,255,255,.16);
        --drawer-bg:#0e2a39;
        --drawer-fg:#eaf2f6;
      }

      /* ===== Base / Layout ===== */
      *{ box-sizing:border-box }
      html,body{ height:100% }
      html{ background:var(--page-bg) }
      body{
        margin:0;
        font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
        color:var(--ink);
        background:var(--page-bg);
        min-height:100svh; display:flex; flex-direction:column;
        scroll-behavior:smooth;
        padding-top: env(safe-area-inset-top);
      }
      :focus-visible{ outline:none; box-shadow:0 0 0 6px var(--ring) }

      /* Global anchor offset so in-page links don't hide under sticky header */
      :where([id]){ scroll-margin-top: calc(var(--anchor-offset) + 10px) }

      /* Main spacing parity with Home */
      main{ padding:10px 0 var(--cta-desktop-gap); flex:1 0 auto }

      a{ color:var(--accent); text-decoration:none }
      a:hover{ text-decoration:underline }
      .wrap{ max-width:var(--w); margin:0 auto; padding:0 var(--wrap-pad) }
      
      /* Keep footer & dock icons rock-solid (macOS fix) */
      :where(footer .icon-btn, .mobile-dock .icon-btn){
        text-decoration: none !important;   /* ignore global underline */
        will-change: transform;             /* pre-promote each icon */
        transform: translateZ(0);           /* make its own layer */
        backface-visibility: hidden;
        contain: paint;                      /* isolate repaints */
      }

      :where(footer .icon-btn:hover, .mobile-dock .icon-btn:hover){
        text-decoration: none !important;
        transform: translate3d(0, -2px, 0);  /* ONLY the hovered one moves */
      }

/* Optional: scope underlines to text links, not icon buttons */
footer a:hover,
.mobile-dock a:hover { text-decoration: none; }

      /* Visually hidden text */
      .sr-only{
        position:absolute !important;
        width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;
        clip:rect(0,0,0,0);white-space:nowrap;border:0;
      }

      /* ===== Bands (section spacing) ===== */
      section.band{ position:relative; padding:var(--band-space) 0 }
      /* CTA band: slight extra top breathing room; desktop keeps 28px bottom */
      .band--cta{ padding-top: calc(var(--band-space) + 14px); padding-bottom: var(--band-space) }
      h2{ margin:0 0 14px; font-size:clamp(20px,2.6vw,28px) }

      /* ===== Sticky Header (full parity with Home) ===== */
      header.site-header{
        position:sticky; top:0; z-index:1000;
        background:var(--bar-bg); color:var(--bar-fg);
        border-bottom:1px solid var(--bar-border);
        backdrop-filter:saturate(120%) blur(2px);
        transition:background-color .2s ease, color .2s ease, border-color .2s ease;
      }
      /* Make the header container full-bleed */
      .site-header .wrap{ max-width:none; padding-left:0; padding-right:0 }

      .topbar{
        display:flex;align-items:center;justify-content:space-between;gap:12px;
        padding:10px 0; /* vertical only; horizontal gutters handled below */
      }
      /* Desktop: gutters that match the page wrap */
      @media (min-width:961px){
        :root{ --nav-gutter: var(--wrap-pad); }
        .topbar > .brand{
          margin-left: calc(var(--nav-gutter) + env(safe-area-inset-left));
        }
        .topbar > nav.primary-nav{
          margin-right: calc(var(--nav-gutter) + env(safe-area-inset-right));
        }
      }
      /* Mobile: modest side padding on the bar */
      @media (max-width:960px){
        .topbar{
          padding-left: calc(16px + env(safe-area-inset-left));
          padding-right: calc(16px + env(safe-area-inset-right));
        }
      }

      .brand{ display:flex; align-items:center; gap:12px }

      /* ===== Brand link ===== */
      .brand-link--wide{
        display:flex;align-items:center;gap:12px;
        color:var(--bar-fg);text-decoration:none;border-radius:0;padding:0;outline:none;
      }
      .brand-link--wide:hover{ text-decoration:none }
      .brand-text{ display:flex;flex-direction:column;line-height:1.1 }
      .brand-name{
        font-weight:900;letter-spacing:.2px;font-size:clamp(18px,1.8vw,24px);color:var(--bar-fg);
        transition:transform .25s cubic-bezier(.2,.8,.2,1), text-shadow .25s ease;
      }
      .brand-creds{
        color:color-mix(in srgb, var(--bar-fg) 70%, #cfd8e3);
        font-weight:400;letter-spacing:.2px;font-size:clamp(12px,1.2vw,14px);
        transition:transform .25s cubic-bezier(.2,.8,.2,1), text-shadow .25s ease;
      }
      @supports not (color-mix: in srgb, white 50%, black 50%){
        .brand-creds{ color:#c3c9d2 }
      }

      /* ===== Avatar with logo flip (no portrait) ===== */
      .avatar{ width:var(--avatar-size); height:var(--avatar-size); perspective:1100px }
      .avatar-badge{ display:block;width:100%;height:100%;border-radius:50%;outline:none;user-select:none;-webkit-tap-highlight-color:transparent;cursor:pointer }
      .avatar-inner{
        position:relative;width:100%;height:100%;
        transform-style:preserve-3d;will-change:transform;
        --ry: 0turn;       /* 0turn = front logo; .5turn = mirrored/back logo */
        --spin: 0turn;     /* 1turn added on click */
        transform: rotateY(calc(var(--ry) + var(--spin)));
        transition: transform .72s cubic-bezier(.2,.8,.2,1), filter .3s ease;
      }
      .avatar-face{ position:absolute; inset:0; border-radius:50%; overflow:hidden; backface-visibility:hidden; border:none; box-shadow:none }
      .avatar-face.back{ transform:rotateY(180deg) }
      .avatar-face img{ width:100%;height:100%;object-fit:contain;padding:8px;background:transparent }
      /* Make the "back" logo actually mirrored horizontally */
      .avatar-face.back img{ transform: scaleX(-1); }

      /* Hover: flip to mirrored logo */
      @media (hover:hover) and (pointer:fine){
        .brand-link--wide:hover .avatar-inner{
          --ry: .5turn;
          transform: rotateY(calc(var(--ry) + var(--spin))) rotateX(8deg) translateY(-2px);
        }
      }
      @media (max-width:960px){ :root{ --avatar-size:72px } }

      /* ===== Desktop nav ===== */
      nav.primary-nav{ display:flex }
      nav.primary-nav ul{ list-style:none;display:flex;gap:18px;margin:0;padding:0 }
      nav.primary-nav a{ color:var(--bar-fg);font-weight:700;position:relative }
      nav.primary-nav a::after{
        content:"";position:absolute;left:0;right:0;bottom:-6px;height:2px;background:color-mix(in srgb, var(--bar-fg) 25%, transparent);transform:scaleX(0);
        transform-origin:left;transition:transform .22s ease;
      }
      nav.primary-nav a:hover{ color:var(--bar-fg);text-decoration:none }
      nav.primary-nav a:hover::after{ transform:scaleX(1) }
      /* Active page styling (parity with Home) */
      nav.primary-nav a[aria-current="page"]{ font-weight:900 }
      nav.primary-nav a[aria-current="page"]::after{ transform:scaleX(1) }
      
      /* Active (current page) state in the mobile drawer */
      .mobile-drawer nav a[aria-current="page"]{
        background: rgba(255,255,255,.18);
        border-color: rgba(0,0,0,.18);
      }

      /* ===== Mobile hamburger (hidden on desktop) ===== */
      .menu-toggle{
        display:none; /* shown on <= 960px */
        background:transparent;border:none;color:var(--bar-fg);
        width:44px;height:44px;border-radius:10px;cursor:pointer;
        -webkit-tap-highlight-color:transparent;
      }
      .menu-toggle .bars,
      .menu-toggle .bars::before,
      .menu-toggle .bars::after{
        display:block;width:22px;height:2px;background:currentColor;border-radius:2px;position:relative;margin:0 auto;
        transition:transform .2s ease, opacity .2s ease;
      }
      .menu-toggle .bars::before,
      .menu-toggle .bars::after{ content:""; position:absolute; left:0 }
      .menu-toggle .bars::before{ transform:translateY(-7px) }
      .menu-toggle .bars::after{ transform:translateY(7px) }

      /* ===== Mobile drawer ===== */
      .drawer-backdrop{
        position:fixed; inset:0; background:rgba(0,0,0,.45); backdrop-filter:saturate(120%) blur(2px);
        opacity:0; pointer-events:none; transition:opacity .18s ease; z-index:1090;
      }
      .mobile-drawer{
        position:fixed; inset:0 0 0 auto; width:min(420px, 92vw);
        background:var(--drawer-bg); color:var(--drawer-fg);
        transform:translateX(100%); transition:transform .22s cubic-bezier(.2,.8,.2,1);
        box-shadow:-20px 0 40px rgba(0,0,0,.2); z-index:1100;
        display:flex; flex-direction:column; gap:10px; padding:18px 18px calc(18px + env(safe-area-inset-bottom));
      }
      .mobile-drawer header{ display:flex; align-items:center; justify-content:space-between; }
      .mobile-drawer h3{ margin:0; font-size:1.05rem; font-weight:900 }
      .mobile-drawer nav ul{ list-style:none; margin:10px 0; padding:0; display:grid; gap:8px }
      .mobile-drawer nav a{
        display:block; padding:12px 10px; border-radius:12px; color:inherit; background:rgba(255,255,255,.06);
        font-weight:800; text-decoration:none; border:1px solid rgba(0,0,0,.06)
      }
      .mobile-drawer nav a:hover{ background:rgba(255,255,255,.12) }
      .mobile-drawer .quick{ display:grid; gap:10px; margin-top:4px }
      .mobile-drawer .quick .btn{ width:100%; justify-content:center }

      body.drawer-open .drawer-backdrop{ opacity:1; pointer-events:auto }
      body.drawer-open .mobile-drawer{ transform:none }
      body.drawer-open{ overflow:hidden }

      /* ===== Hero (Executive bio + photo) ===== */
      .hero{ padding:6px 0 0 }
      .hero-section.band{ padding-top:22px; padding-bottom:var(--band-space) }
      .hero-section .wrap{
        padding-left: calc(var(--wrap-pad) + env(safe-area-inset-left));
        padding-right: calc(var(--wrap-pad) + env(safe-area-inset-right));
      }
      .hero-grid{
        display:grid;
        grid-template-columns:minmax(0,1fr) auto;
        grid-template-areas:
          "title title"
          "bio photo";
        gap:clamp(20px,2.2vw,24px) 26px;
        align-items:start;
      }
      .hero-grid > *{ min-width:0 }
      .h1{
        grid-area:title; margin:0; font-weight:900; letter-spacing:.2px;
        font-size:clamp(28px,6vw,56px); line-height:1.08; color:var(--ink);
      }
      .bio{ grid-area:bio }
      .bio p{ margin:0 0 10px }
      .photo-badge{ grid-area:photo; align-self:start; margin-top:-10px }

      /* Scroll cue */
      .scroll-cue{ display:flex; justify-content:center; margin-top:6px }
      .scroll-arrow{
        display:inline-grid; place-items:center; width:38px; height:38px; border-radius:999px;
        background:#fff; border:1px solid rgba(15,91,102,.25); color:var(--brand-blue-700);
        box-shadow:0 8px 18px rgba(17,24,39,.18); text-decoration:none; animation:floaty 2.4s ease-in-out infinite;
      }
      .scroll-arrow:hover{ text-decoration:none; transform:translateY(-2px) }
      @keyframes floaty{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(4px) } }

      /* ===== CONTACT MODAL (parity with Home) ===== */
      dialog#contactDialog{
        width:min(840px, 94vw); border:0; padding:0; border-radius:20px;
        box-shadow:0 30px 80px rgba(17,24,39,.35), 0 12px 30px rgba(17,24,39,.18);
        background:#fff; animation:modal-in .22s cubic-bezier(.2,.8,.2,1);
      }
      dialog#contactDialog::backdrop{
        background:rgba(17,24,39,.55);
        backdrop-filter:saturate(120%) blur(3px);
        animation:backdrop-in .22s ease;
      }
      @keyframes modal-in{ from{ transform:translateY(14px) scale(.985); opacity:.0 } to{ transform:none; opacity:1 } }
      @keyframes backdrop-in{ from{ opacity:.0 } to{ opacity:1 } }

      .modal-header{
        display:flex; align-items:center; justify-content:space-between;
        padding:18px 18px 6px; border-bottom:1px solid #e5e7eb;
      }
      .modal-title{ margin:0; font-weight:900; font-size:1.15rem; letter-spacing:.2px; color:#0f172a }
      .modal-close{
        width:38px; height:38px; border-radius:12px; border:1px solid #e5e7eb; background:#fff; color:#0f172a; cursor:pointer;
        display:inline-flex; align-items:center; justify-content:center;
        box-shadow:var(--shadow);
        transition:transform .16s ease, box-shadow .16s ease, background .16s ease;
      }
      .modal-close:hover{ transform:translateY(-2px); box-shadow:var(--shadow-hover) }

      .modal-body{ padding:14px 18px 18px }
      .contact-actions{
        display:flex; gap:12px; flex-wrap:wrap;
        position:relative; /* anchor for call-popover pill */
      }
      .contact-actions .btn{ border-radius:999px }
      .contact-actions .btn-primary{ filter:saturate(115%) }

      /* Call/text popover pill (shared with Home) */
      .call-popover{
        position:absolute;
        z-index:1200;
        transform: translateY(calc(100% + 8px));
        left:0;
        background:#fff;
        color:var(--ink);
        border:1px solid #e5e7eb;
        border-radius:12px;
        box-shadow:var(--shadow);
        padding:10px 12px;
        font-size:.95rem;
        white-space:nowrap;
        pointer-events:auto;
      }
      .call-popover__copy{
        appearance:none;
        border:0;
        background:transparent;
        padding:0;
        margin:0 8px 0 0;
        font:inherit;
        font-weight:800;
        color:var(--ink);
        cursor:pointer;
      }
      .call-popover__copy:focus-visible{
        outline:none;
        box-shadow:0 0 0 6px var(--ring);
        border-radius:8px;
      }
      @media (hover:none){
        .call-popover{
          left:50% !important;
          transform: translate(-50%, 10px);
          max-width:92vw;
          text-align:center;
        }
      }

      .divider{ height:1px; background:#e5e7eb; margin:8px 0 14px }

      .form-grid{
        display:grid;
        grid-template-columns:120px 1fr;
        gap:10px 12px;
        align-items:center;
      }
      .form-grid label{ font-weight:700; color:#0f172a }
      .form-grid input,
      .form-grid textarea{
        width:100%; font:inherit; padding:12px 14px; border-radius:14px; border:1px solid #e5e7eb; background:#f8fafc;
        transition:border-color .16s ease, box-shadow .16s ease, background .16s ease;
        box-shadow:inset 0 0 0 1px rgba(255,255,255,.6);
      }
      .form-grid textarea{ min-height:160px; resize:vertical }
      .form-grid input:focus,
      .form-grid textarea:focus{
        outline:none; border-color:#c5d6e2; background:#fff; box-shadow:0 0 0 6px var(--ring);
      }
      .form-actions{
        grid-column:2 / -1;
        display:flex; gap:10px; align-items:center; justify-content:flex-end; margin-top:6px;
      }
      .form-hint{ grid-column:2 / -1; margin-top:4px; font-size:.9rem; color:var(--muted) }
      @media (max-width:640px){
        .form-grid{ grid-template-columns:1fr }
        .form-actions, .form-hint{ grid-column:1 / -1 }
      }

      /* ===== About-specific visuals: interactive photo badge ===== */
      .photo-badge{
        width:clamp(220px,28vw,380px); aspect-ratio:1 / 1; position:relative; border-radius:50%;
        perspective:1100px; cursor:pointer; touch-action:manipulation; isolation:isolate;
        --flip: 0turn;
      }
      .photo-badge.is-flipped{ --flip: 180deg }
      .photo-badge::after{
        content:""; position:absolute; left:6%; right:6%; bottom:-26px; height:48px; border-radius:999px;
        background:rgba(0,0,0,.55); filter:blur(26px); z-index:-1;
      }
      .photo-badge .tilt{
        position:absolute; inset:0; border-radius:50%; overflow:hidden;
        transform-style:preserve-3d; will-change:transform, filter;
        transition:transform .72s cubic-bezier(.2,.8,.2,1), filter .3s ease;
        --rx: 0deg; --ry: 0deg; transform: rotateX(var(--rx)) rotateY(var(--ry));
      }
      .photo-badge .tilt::after{
        content:""; position:absolute; inset:0; border-radius:50%; pointer-events:none; z-index:0;
        box-shadow:0 0 0 12px var(--brand-blue-700),
                   0 34px 88px rgba(11,63,71,.55),
                   0 20px 44px rgba(17,24,39,.28),
                   0 8px 20px rgba(17,24,39,.18);
        transform: translateZ(.01px) rotateY(var(--flip));
        transition: transform .72s cubic-bezier(.2,.8,.2,1);
        backface-visibility:hidden;
      }
      .photo-badge .tilt::before{
        content:""; position:absolute; inset:0; pointer-events:none; z-index:2;
        background: radial-gradient(ellipse at 30% 25%, rgba(0,0,0,0) 55%, rgba(0,0,0,.14) 100%);
        transform: translateZ(.01px) rotateY(var(--flip));
        transition: transform .72s cubic-bezier(.2,.8,.2,1);
        backface-visibility:hidden;
      }
      .photo-badge .coin{
        position:absolute; inset:0; transform-style:preserve-3d; will-change:transform;
        transform: translateZ(.01px) rotateY(var(--flip));
        transition: transform .72s cubic-bezier(.2,.8,.2,1);
        z-index:1; backface-visibility:hidden;
      }
      .photo-badge .face{
        position:absolute; inset:0; border-radius:0; overflow:visible; display:grid; place-items:center; backface-visibility:hidden; transform: translateZ(.01px);
      }
      .photo-badge .face.front{ background:#fff }
      .photo-badge .face.back{
        transform: rotateY(180.001deg); text-align:center; padding:clamp(24px,7%,30px) 24px; color:var(--brand-blue-900);
        background: radial-gradient(ellipse at 30% 25%, rgba(255,255,255,.96) 0%, rgba(255,255,255,.9) 55%, rgba(255,255,255,.86) 100%),
                    linear-gradient(180deg, rgba(15,91,102,.10), rgba(15,91,102,.06));
        display:grid; place-content:center;
      }
      .photo-badge .face.front img{ width:100%; height:100%; object-fit:cover; display:block; backface-visibility:hidden; transform: translateZ(.01px) }
      .photo-badge .quote-wrap{ width:82%; max-width:82%; margin:0 auto }
      .photo-badge .quote{ font-weight:900; font-size:clamp(14px,1.6vw,18px); line-height:1.25; text-wrap:balance; hyphens:auto }
      .photo-badge .byline{ margin-top:8px; font-weight:800; color:var(--brand-blue-700); font-size:.95em }
      @media (hover:hover){ .photo-badge:hover .tilt{ filter: drop-shadow(0 18px 36px rgba(17,24,39,.24)) } }
     
      /* Intro spin: one clean full revolution on first visit */
      @keyframes coinIntroSpin {
        from { transform: translateZ(.01px) rotateY(0turn); }
        to   { transform: translateZ(.01px) rotateY(1turn); }
      }
      /* While intro is running, pause tilt transitions and disable pointer events */
      .photo-badge.intro-spin { pointer-events: none; }
      .photo-badge.intro-spin .tilt { transition: none !important; }
      /* Spin the coin and its light/shadow wrappers in sync */
      .photo-badge.intro-spin .coin,
      .photo-badge.intro-spin .tilt::before,
      .photo-badge.intro-spin .tilt::after {
        animation: coinIntroSpin 1.05s cubic-bezier(.2,.8,.2,1) both;
        will-change: transform;
      }

      /* ===== Cards ===== */
      .tiles{ display:grid; grid-template-columns:repeat(3, 1fr); gap:18px }
      .tile{
        position:relative; background:var(--surface); border-radius:var(--radius); padding:18px 20px;
        box-shadow:var(--shadow); transition:transform .18s ease, box-shadow .18s ease;
      }
      .tile:hover{ transform:translateY(-4px); box-shadow:var(--shadow-hover) }
      .tile h3{ margin:0 0 8px }
      /* Entire card clickable when .card-link present */
      .tile a.card-link{ position:absolute; inset:0; border-radius:var(--radius); text-indent:-9999px; overflow:hidden }

      /* ===== CTA row — spacing parity with Home ===== */
      .cta-row{
        display:flex;
        flex-wrap:wrap;
        gap:12px;              /* equal horizontal & vertical spacing */
        row-gap:12px;
        align-items:center;
        margin-top:6px;        /* small breathing room under the h2 */
      }

      .btn{
        display:inline-flex;align-items:center;gap:8px;
        padding:.7rem 1rem;border-radius:999px;font-weight:800;
        border:1px solid rgba(0,0,0,.04);
        background:#fff;color:var(--brand-blue-900);
        box-shadow:var(--shadow);
        transition:transform .16s ease, box-shadow .16s ease, filter .16s ease;
        text-decoration:none; cursor:pointer;
      }
      .btn:hover{ transform:translateY(-2px); box-shadow:var(--shadow-hover); text-decoration:none }
      .btn:active{ transform:translateY(-1px) }
      .btn-outline{ background:transparent; color:var(--ink); border:1px solid #e5e7eb }
      .btn-primary{ background:var(--brand-blue-700); color:#fff; border-color:transparent; box-shadow:var(--shadow) }
      .btn-primary:hover{ box-shadow:var(--shadow-hover) }
      .btn-group{display:inline-flex;gap:8px;flex-wrap:wrap;align-items:center}

      /* ===== NEW: Chips row (in-hero anchor buttons) ===== */
      .chip-row{
        display:flex; flex-wrap:wrap; gap:10px; margin-top:6px;
      }
      .chip{
        display:inline-flex; align-items:center; gap:8px;
        padding:.55rem .85rem; border-radius:999px; font-weight:800; line-height:1;
        background:#fff; color:var(--brand-blue-900);
        border:1px solid rgba(0,0,0,.04);
        box-shadow:var(--shadow);
        text-decoration:none; cursor:pointer;
        transition:transform .16s ease, box-shadow .16s ease;
      }
      .chip:hover{ text-decoration:none; transform:translateY(-2px); box-shadow:var(--shadow-hover) }
      .chip:active{ transform:translateY(-1px) }

      /* ===== Gradient divider (exact) ===== */
      .section-divider{
        position:relative;
        height:4px;                 /* exact total height */
        margin: var(--divider-gap) 0; /* equal margins */
        border:0;
      }
      .section-divider::after{
        content:""; position:absolute; inset:0; background: var(--page-bg); z-index:0;
      }
      .section-divider::before{
        content:"";
        position:absolute; left:0; right:0; top:50%;
        transform:translateY(-50%);
        height:1px;                 /* exact line thickness */
        border-radius:999px;
        background:linear-gradient(
          90deg,
          rgba(15,91,102,var(--divider-edge-alpha)) 0%,
          rgba(15,91,102,var(--divider-center-alpha)) 50%,
          rgba(15,91,102,var(--divider-edge-alpha)) 100%
        );
        z-index:1;
      }

      /* ===== Footer — teal always ===== */
      footer{
        background: var(--brand-blue-900) !important;
        color: #ffffff !important;
        padding: 18px 0;
        text-align: center;
        border-top: 1px solid rgba(255,255,255,.18);
      }
      footer .wrap{opacity:.95;display:flex;flex-direction:column;gap:14px;align-items:center}
      .social{display:flex;align-items:center;gap:10px}
      footer .icon-btn{
        display:inline-flex;align-items:center;justify-content:center;
        width:38px;height:38px;border-radius:999px;
        background: rgba(255,255,255,.10);
        border:1px solid rgba(255,255,255,.22);
        color:#fff;
        transition:transform .18s ease, box-shadow .18s ease, background .18s ease;
      }
      footer .icon-btn:hover{
        transform:translateY(-2px);
        box-shadow:0 8px 18px rgba(0,0,0,.25);
        background: rgba(255,255,255,.18);
      }
      .icon{width:18px;height:18px;fill:currentColor}

      /* ===== Mobile dock (quick contact) — teal always ===== */
      .mobile-dock{
        position:fixed; left:0; right:0; bottom:0; z-index:980;
        background: var(--brand-blue-900); color: #ffffff;
        border-top:1px solid rgba(255,255,255,.18);
        padding:6px 10px calc(6px + env(safe-area-inset-bottom));
        display:none; /* shown on <= 960px */
      }
      .mobile-dock .dock{ max-width:var(--w); margin:0 auto; display:flex; justify-content:center; gap:14px }
      .mobile-dock .icon-btn{
        display:inline-flex; align-items:center; justify-content:center; -webkit-tap-highlight-color:transparent; touch-action:manipulation;
        width:46px; height:46px; border-radius:999px; color:#fff;
        background: rgba(255,255,255,.10); border: 1px solid rgba(255,255,255,.22);
      }
      .mobile-dock .icon{ display:block; width:18px; height:18px; flex:0 0 auto }
      .mobile-dock .icon *, .mobile-dock .icon path, .mobile-dock .icon rect, .mobile-dock .icon circle, .mobile-dock .icon polygon, .mobile-dock .icon line{ fill: currentColor; stroke:none }
      .mobile-dock .icon-btn:hover{ transform: translateY(-2px); box-shadow: 0 8px 18px rgba(0,0,0,.25); background: rgba(255,255,255,.18) }

      /* ===== Responsive ===== */
      @media (max-width:1120px){
        .tiles{ grid-template-columns:repeat(2, 1fr) }
      }
      @media (max-width:960px){
        nav.primary-nav{ display:none }
        .menu-toggle{ display:inline-flex; align-items:center; justify-content:center }
        .tiles{ grid-template-columns:1fr }
        /* Replace fixed 90px with dynamic dock height + 14px visible cushion */
        main{ padding-bottom: calc(var(--dock-h) + var(--cta-mobile-gap)) }
        .mobile-dock{ display:block }
        footer .social{ display:none !important }
        .hero-grid{
          grid-template-columns:1fr;
          grid-template-areas:
            "title"
            "photo"
            "bio";
        }
        .photo-badge{ justify-self:center; margin-top:0 }
        /* Avoid double spacing at the bottom band on mobile */
        .band--cta{ padding-bottom: 0 }
      }
      @media (max-width:520px){
        .h1{ font-size:clamp(26px,8vw,40px) }
      }

      /* ===== Header/nav hover tint (parity with Home) ===== */
      .brand-link--wide:hover .brand-name,
      .brand-link--wide:focus-visible .brand-name{
        color: color-mix(in srgb, var(--bar-fg) 70%, var(--accent) 30%);
      }
      .brand-link--wide:hover .brand-creds,
      .brand-link--wide:focus-visible .brand-creds{
        color: color-mix(in srgb, var(--bar-fg) 60%, var(--accent) 40%);
      }
      nav.primary-nav a:hover,
      nav.primary-nav a:focus-visible{
        color: color-mix(in srgb, var(--bar-fg) 70%, var(--accent) 30%);
      }

      /* ===== Skip link ===== */
      .skip-link{
        position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden;
      }
      .skip-link:focus{
        left:16px;top:12px;width:auto;height:auto;padding:.5rem .75rem;border-radius:10px;
        background:#fff;box-shadow:0 0 0 6px var(--ring);z-index:2000
      }
      /* Credentials: compact cards + inline Read more (parity with Portfolio) */
      .tile details{ margin-top:8px; border-top:1px dashed #e5e7eb; padding-top:8px }
      .tile details summary{
        cursor:pointer; font-weight:800; color:var(--brand-blue-700);
        list-style:revert; /* keep default ▶/▾ marker like Portfolio */
      }
      .tile details[open] summary{ margin-bottom:6px }
      .tile details summary::-webkit-details-marker{ /* keep default arrow on Safari, but ensure spacing */
        margin-right:6px;
      }
    </style>

    <!-- Inert polyfill (progressive) -->
    <script>
      if (!('inert' in HTMLElement.prototype)) {
        var s = document.createElement('script');
        s.src = 'https://unpkg.com/wicg-inert@3.1.2/dist/inert.min.js';
        s.defer = true;
        document.head.appendChild(s);
      }
    </script>

    <!-- Person schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Isaac B. Michael",
        "jobTitle": "Research Scientist; Program Director",
        "url": "https://isaacbmichael.com/",
        "sameAs": [
          "mailto:isaac.b.michael@gmail.com",
          "https://www.linkedin.com/in/isaacbmichael",
          "https://github.com/isaacbmichael"
        ]
      }
    </script>
  </head>
  <body class="bars-dark">
    <a class="skip-link" href="#main">Skip to content</a>

    <!-- ===== Mobile drawer & backdrop ===== -->
    <div class="drawer-backdrop" id="drawerBackdrop" hidden></div>
    <aside class="mobile-drawer" id="mobileDrawer" aria-hidden="true">
      <header>
        <h3>Menu</h3>
        <button class="menu-toggle" id="menuClose" aria-label="Close menu">
          <span class="bars"></span>
        </button>
      </header>
      <nav aria-label="Mobile">
        <ul>
          <li><a href="/about/">About</a></li>
          <li><a href="/portfolio/">Portfolio</a></li>
          <li><a href="/cv/">Résumé</a></li>
          <li><a href="/services/">Services</a></li>
        </ul>
      </nav>
      <div class="quick" aria-label="Quick actions">
        <a class="btn btn-primary" href="mailto:isaac.b.michael@gmail.com">Email</a>
        <a class="btn" href="https://calendly.com/isaacbmichael" target="_blank" rel="noopener noreferrer">Schedule on Calendly</a>
        <div class="btn-group call-cluster" data-phone="+12543666861">
          <a class="btn"
             data-call
             href="tel:+12543666861"
             aria-label="Call or text +1 (254) 366-6861">
            Call or text
          </a>
        </div>
        <a class="btn" href="https://www.linkedin.com/in/isaacbmichael" target="_blank" rel="noopener noreferrer">LinkedIn</a>
      </div>
    </aside>

    <!-- ===== Sticky Header ===== -->
    <header class="site-header">
      <div class="wrap topbar">
        <div class="brand">
          <a href="/" rel="home" aria-label="Home" class="brand-link--wide" id="brandLink">
            <!-- Avatar: logo on both sides; no portrait; mirrored on hover -->
            <div class="avatar" aria-hidden="true">
              <div class="avatar-badge">
                <div class="avatar-inner">
                  <div class="avatar-face front">
                    <img id="logoFront"
                         src="/assets/brands/logo-white.svg"
                         data-logo-light="/assets/brands/logo-tealroyal.svg"
                         data-logo-dark="/assets/brands/logo-white.svg"
                         alt="Isaac B. Michael logo (front)"
                         decoding="async" width="96" height="96"
                         loading="eager" fetchpriority="high" />
                  </div>
                  <div class="avatar-face back">
                    <img id="logoBack"
                         src="/assets/brands/logo-white.svg"
                         data-logo-light="/assets/brands/logo-tealroyal.svg"
                         data-logo-dark="/assets/brands/logo-white.svg"
                         alt="Isaac B. Michael logo (mirrored)"
                         decoding="async" width="96" height="96" />
                  </div>
                </div>
              </div>
            </div>

            <div class="brand-text" aria-label="Site owner">
              <span class="brand-name">Isaac B. Michael</span>
              <div class="brand-creds">PhD · MS · MApSt</div>
            </div>
          </a>
        </div>

        <!-- Desktop nav -->
        <nav class="primary-nav" aria-label="Primary">
          <ul>
            <li><a href="/about/">About</a></li>
            <li><a href="/portfolio/">Portfolio</a></li>
            <li><a href="/cv/">Résumé</a></li>
            <li><a href="/services/">Services</a></li>
            <li><a href="/contact/" data-contact-open aria-label="Open contact dialog" aria-controls="contactDialog" aria-haspopup="dialog">Contact</a></li>
          </ul>
        </nav>

        <!-- Mobile hamburger -->
        <button class="menu-toggle" id="menuToggle" aria-label="Open menu" aria-controls="mobileDrawer" aria-expanded="false">
          <span class="bars"></span>
        </button>
      </div>
    </header>

    <main id="main">
      <!-- Hero (Executive bio + portrait) -->
      <section class="hero-section band">
        <div class="wrap hero">
          <div class="hero-grid">
            <h1 class="h1">Executive bio</h1>

            <article class="bio">
              <p>
                I turn complex data into decisions leaders can trust, blending survey methods,
                analytics automation, and day-to-day program operations with clear documentation
                and reproducible results.
              </p>
              <p>
                At the Centers for Disease Control and Prevention’s Pregnancy Risk Assessment
                Monitoring System (PRAMS), I co-led national data weighting across 50 jurisdictions—about
                81% of U.S. live births. I built modular SAS/SQL workflows with automated quality checks,
                sampling verification, and standard outputs that shortened cycles and improved consistency.
              </p>
              <p>
                My work on nonresponse bias helped shift federal policy: the evidence and guidance I
                contributed to supported the Office of Management and Budget in lowering the minimum
                response-rate requirement, enabling more timely, quality-focused evaluation. I also advised
                PRAMS sites and CDC researchers on study design, co-authored statistical publications, and
                delivered national briefings on weighting practices and mitigation strategies.
              </p>
              <p>
                As an independent consultant, I built a three-program weighting system and automated SAS 
                reporting engine, scaling quality review and cutting turnaround time. Beyond public health, I expanded
                LSU’s Virtual Math Research Circle into a year-round, international program—building partnerships
                (including a Zhejiang memorandum of understanding) and modernizing operations.
              </p>
              <p>
                I’m at my best partnering with leaders and analysts to turn complex methods into audit-ready,
                scalable services that raise confidence in decisions.
              </p>
            </article>

            <!-- Interactive photo badge -->
            <figure class="photo-badge" id="photoBadge" role="button" aria-pressed="false" tabindex="0" aria-label="Portrait badge (click to flip)">
              <div class="tilt" id="tiltWrap">
                <div class="coin">
                  <div class="face front">
                    <img src="/assets/img/portrait.jpeg" alt="Portrait of Isaac B. Michael" decoding="async" loading="eager" />
                  </div>
                  <div class="face back" id="quoteFace" aria-live="polite" aria-atomic="true"></div>
                </div>
              </div>
            </figure>
          </div>

          <!-- NEW: In-hero anchor chips -->
          <nav class="chip-row" aria-label="Section shortcuts">
            <a class="chip" href="#impact">Recent impact</a>
            <a class="chip" href="#how">How I work</a>
            <a class="chip" href="#credentials">Credentials</a>
          </nav>

          <!-- Scroll cue -->
          <div class="scroll-cue">
            <a class="scroll-arrow" href="#impact" aria-label="Scroll to Recent impact">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 15.5 5.8 9.3l1.4-1.4L12 12.7l4.8-4.8 1.4 1.4z"/></svg>
            </a>
          </div>
        </div>
      </section>

      <div class="section-divider" aria-hidden="true"></div>

      <!-- Recent impact -->
      <section class="band" aria-labelledby="impact">
        <div class="wrap">
          <h2 id="impact">Recent impact</h2>

          <div class="tiles">
            <div class="tile">
              <h3>PRAMS Data Weighting — National Delivery and Automation</h3>
              <p>
                Co-led national PRAMS weighting across dozens of jurisdictions; organized the season, automated QA and
                sampling-verification, and delivered consistent, on-time releases with lookup-driven, repeatable runs.
              </p>
              <a class="card-link" href="/portfolio/#cdc" aria-label="See CDC portfolio work">View</a>
            </div>

            <div class="tile">
              <h3>Census-Style Survey Weighting — Automated Reporting Engine (Confidential Client)</h3>
              <p>
                Designed a three-program system—setup &amp; QA, weighting, and reporting—with guardrails and automated checks;
                produced one-click, reproducible reports and clear documentation (client confidential).
              </p>
              <a class="card-link" href="/portfolio/#consulting" aria-label="See consulting portfolio work">View</a>
            </div>

            <div class="tile">
              <h3>Virtual Math Research Circle — Year-Round, International Expansion</h3>
              <p>
                Expanded LSU’s program to run year-round with international partners; secured funding, modernized hiring and
                onboarding, and overhauled the public site.
              </p>
              <a class="card-link" href="/portfolio/#lsu" aria-label="See LSU portfolio work">View</a>
            </div>
          </div>
        </div>
      </section>
      
      <div class="section-divider" aria-hidden="true"></div>

      <!-- How I work -->
      <section class="band" aria-labelledby="how">
        <div class="wrap">
          <h2 id="how">How I work</h2>

          <div class="tiles">
            <div class="tile">
              <h3>Rigor and reproducibility</h3>
              <p>Documented pipelines, versioned artifacts, and reusable templates so results are consistent and defensible.</p>
            </div>
            <div class="tile">
              <h3>Governance by design</h3>
              <p>Sampling verification, audit logs, accessible documentation, and SLAs mapped to decision-makers and outcomes.</p>
            </div>
            <div class="tile">
              <h3>Confidentiality first</h3>
              <p>Client identities remain private under NDA. I share methods and impacts, not sensitive data.</p>
            </div>
          </div>
        </div>
      </section>

      <div class="section-divider" aria-hidden="true"></div>

      <!-- ===== CREDENTIALS (compact with Portfolio-style Read more) ===== -->
      <section class="band" aria-labelledby="credentials">
        <div class="wrap">
          <h2 id="credentials">Credentials</h2>

          <div class="tiles">
            <!-- Degrees (compact, no expander needed) -->
            <div class="tile">
              <h3>Education</h3>
              <ul>
                <li>MApSt, Applied Statistics — Louisiana State University (2023)</li>
                <li>PhD, Mathematics — Baylor University (2019)</li>
                <li>MS, Mathematics — Baylor University (2015)</li>
                <li>BS, Mathematics — Tarleton State University (2013)</li>
              </ul>
            </div>

            <!-- Publications: short teaser + full list in details -->
            <div class="tile">
              <h3>Selected publications</h3>
              <ul>
                <li><strong>Extended Power Weighted Rellich-Type Inequalities with Logarithmic Refinements</strong> — Yokohama Publishers (2024)</li>
                <li><strong>Preliminary Validation of Digital Photography to Assess the Home Food Environment</strong> — EJIHPE (2023)</li> 
              </ul>
              <details>
                <summary>Read more</summary>
                <ul style="margin-top:8px">
                  <li><strong>Online Engineering Bridge Summer Program… Calculus</strong> — ASEE (2023)</li>
                  <li><strong>A New Proof of the Power Weighted Birman–Hardy–Rellich Inequalities</strong> — Birkhäuser (2022)</li>
                  <li><strong>A sequence of weighted Birman–Hardy–Rellich-type inequalities with logarithmic refinements</strong> — Integral Equations and Operator Theory (2022)</li>
                  <li><strong>Optimality of constants in weighted Birman–Hardy–Rellich inequalities…</strong> — CUBO (2022)</li>
                  <li><strong>On weighted Hardy-type inequalities</strong> — Mathematical Inequalities & Applications (2020)</li>
                  <li><strong>Radial and logarithmic refinements of Hardy’s inequality</strong> — St. Petersburg Math. J. (2019)</li>
                  <li><strong>On Birman’s sequence of Hardy–Rellich-type inequalities</strong> — J. Differential Equations (2018)</li>
                  <li><strong>Net regular signed trees</strong> — Australas. J. Combin. (2016)</li>
                </ul>
                <!-- <p style="margin-top:8px">
                  <a href="/writing/" aria-label="See publications and writing">View all publications</a>
                </p> -->
              </details>
            </div>

            <!-- Tools & platforms: concise + full detail in details -->
            <div class="tile">
              <h3>Tools &amp; platforms</h3>
              <p><strong>Stat/DS:</strong> SAS, R, Python, SQL, SEM, survey sampling.</p>
              <p><strong>AI/MLOps:</strong> BigQuery ML, TensorFlow, Databricks (DLT, MLOps).</p>
              <p><strong>Algorithms &amp; libs:</strong> Scikit-learn, CHAID, ARIMA, K-Means; R Markdown, SAS Macros.</p>
              <details>
                <summary>Read more</summary>
                <div style="margin-top:8px">
                  <p><strong>Data &amp; cloud:</strong> Redshift, GCP/BigQuery, DBVisualizer, SAS Studio, Google Colab.</p>
                  <p><strong>BI/viz:</strong> Tableau, Power BI, Looker Studio, SAS ODS Graphics, Excel dashboards.</p>
                  <p><strong>Dev/OS:</strong> LaTeX/Beamer, Git/GitHub, RStudio, VS Code; Windows, macOS, Linux (CLI).</p>
                  <p><strong>Web/productivity:</strong> HTML/JS (basic), Google Workspace, Microsoft 365, OpenOffice.</p>
                </div>
              </details>
            </div>

            <!-- Coursework: highlights + full lists in details -->
            <div class="tile">
              <h3>Selected graduate coursework</h3>
              <ul>
                <li>Statistical Theory; Statistical Inference I; Regression Analysis; Experimental Design</li>
                <li>Functional Analysis; Operator &amp; Spectral Theory; PDEs/Distributions</li>
              </ul>
              <details>
                <summary>Read more</summary>
                <div style="margin-top:8px">
                  <p><strong>LSU (M.Ap.St.):</strong> Statistical Theory; Statistical Inference; Probability &amp; Statistics; Regression; Experimental Design; Experimental Statistics; Nonparametric; Data Mining; SEM &amp; HLM; Statistical Consulting.</p>
                  <p><strong>Baylor (PhD/MS Math):</strong> Real Analysis; Differential Geometry; Compact Lie Groups; Functional Analysis; Operator &amp; Spectral Theory; Potential Theory; PDE Theory; Distribution Theory; Calculus of Variations; Differential Equations; Complex Analysis; Riemann Surfaces; Advanced Algebra; Algebraic Topology; Topology; Graph Theory; Additive Combinatorics.</p>
                </div>
              </details>
            </div>

            <!-- Training: top items + remainder in details -->
            <div class="tile">
              <h3>Job-related training</h3>
              <ul>
                <li><strong>CDC PRAMS Data Weighting System</strong> (Nov 2023–Feb 2024)</li>
                <li><strong>CDC Sampling Verification</strong> (Oct 2023)</li>
              </ul>
              <details>
                <summary>Read more</summary>
                <ul style="margin-top:8px">
                  <li><strong>CDC SAS ODS Graphics</strong> (Sept 2023)</li>
                  <li><strong>U.S. Census: Introduction to Survey Sampling</strong> (Dec 2022)</li>
               </ul>
              </details>
            </div>
          </div>
        </div>
      </section>

      <div class="section-divider" aria-hidden="true"></div>
    
      <!-- CTA -->
      <section class="band band--cta" aria-labelledby="next">
        <div class="wrap">
          <h2 id="next">What would you like to explore?</h2>
          <div class="cta-row" aria-label="Quick navigation">
            <a class="btn" href="/">Home</a>
            <a class="btn btn-primary" href="/about/">About</a>
            <a class="btn" href="/portfolio/">Portfolio</a>
            <a class="btn" href="/cv/">Résumé</a>
            <a class="btn" href="/services/">Services</a>
            <a class="btn" href="/contact/" data-contact-open aria-label="Open contact dialog" aria-controls="contactDialog" aria-haspopup="dialog">Contact</a>
          </div>
        </div>
      </section>
    </main>

    <!-- ===== Footer (teal, persistent) ===== -->
    <footer>
      <div class="wrap">
        <div class="social" aria-label="External profiles">
          <a class="icon-btn" href="mailto:isaac.b.michael@gmail.com" title="Email">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5-8-5V6l8 5 8-5v2Z"/></svg>
            <span class="sr-only">Email</span>
          </a>
          <a class="icon-btn" href="https://calendly.com/isaacbmichael" target="_blank" rel="noopener noreferrer" title="Schedule with Calendly">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2a1 1 0 1 1 2 0v2h6V2a1 1 0 1 1 2 0v2h1a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h1V2a1 1 0 1 1 2 0v2Zm12 6H5v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8Z"/></svg>
            <span class="sr-only">Calendly</span>
          </a>
          <a class="icon-btn" href="https://www.linkedin.com/in/isaacbmichael" target="_blank" rel="noopener noreferrer" title="LinkedIn">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M4.98 3.5A2.5 2.5 0 1 1 5 8.5a2.5 2.5 0 0 1-.02-5ZM3 9h4v12H3zM9 9h3.8v1.8h.05c.53-1 1.84-2.05 3.8-2.05 4.06 0 4.81 2.67 4.81 6.15V21h-4v-5.3c0-1.26-.03-2.88-1.76-2.88-1.76 0-2.03 1.37-2.03 2.78V21H9z"/></svg>
            <span class="sr-only">LinkedIn</span>
          </a>
          <a class="icon-btn" href="https://github.com/isaacbmichael" target="_blank" rel="noopener noreferrer" title="GitHub">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .5a12 12 0 0 0-3.8 23.4c.6 .1 .8-.2 .8-.5v-2c-3.3 .7-4-1.6-4-1.6-.5-1.2-1.2-1.5-1.2-1.5-1-.7 .1-.7 .1-.7 1.1 .1 1.7 1.1 1.7 1.1 1 .1 .7 2 .7 2 1.8 .3 2.7-1.2 2.7-1.2 .5-1 .8-1.4 .8-1.4-2.7-.3-5.6-1.4-5.6-6.2 0-1.4 .5-2.5 1.2-3.3-.1-.3-.5-1.6 .1-3.3 0 0 1-.3 3.4 1.3a11.6 11.6 0 0 1 6.2 0C18 5 19 5.3 19 5.3c .6 1.7 .2 3 .1 3.3 .8 .8 1.2 1.9 1.2 3.3 0 4.8-2.9 5.9-5.6 6.2 .4 .3 .8 1 .8 2.1v3c0 .3 .2 .6 .8 .5A12 12 0 0 0 12 .5Z"/></svg>
            <span class="sr-only">GitHub</span>
          </a>
        </div>
        <div>© <span id="y"></span> Isaac B. Michael · All rights reserved.</div>
      </div>
    </footer>

    <!-- ===== Bottom quick-contact dock (mobile, teal) ===== -->
    <div class="mobile-dock" role="region" aria-label="Quick contact">
      <div class="dock">
        <a class="icon-btn" href="mailto:isaac.b.michael@gmail.com" title="Email">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5-8-5V6l8 5 8-5v2Z"/></svg>
          <span class="sr-only">Email</span>
        </a>
        <a class="icon-btn" href="https://calendly.com/isaacbmichael" target="_blank" rel="noopener noreferrer" title="Calendly">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2a1 1 0 1 1 2 0v2h6V2a1 1 0 1 1 2 0v2h1a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h1V2a1 1 0 1 1 2 0v2Zm12 6H5v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8Z"/></svg>
          <span class="sr-only">Calendly</span>
        </a>
        <a class="icon-btn" href="https://www.linkedin.com/in/isaacbmichael" target="_blank" rel="noopener noreferrer" title="LinkedIn">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M4.98 3.5A2.5 2.5 0 1 1 5 8.5a2.5 2.5 0 0 1-.02-5ZM3 9h4v12H3zM9 9h3.8v1.8h.05c.53-1 1.84-2.05 3.8-2.05 4.06 0 4.81 2.67 4.81 6.15V21h-4v-5.3c0-1.26-.03-2.88-1.76-2.88-1.76 0-2.03 1.37-2.03 2.78V21H9z"/></svg>
          <span class="sr-only">LinkedIn</span>
        </a>
        <a class="icon-btn" href="https://github.com/isaacbmichael" target="_blank" rel="noopener noreferrer" title="GitHub">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .5a12 12 0 0 0-3.8 23.4c.6 .1 .8-.2 .8-.5v-2c-3.3 .7-4-1.6-4-1.6-.5-1.2-1.2-1.5-1.2-1.5-1-.7 .1-.7 .1-.7 1.1 .1 1.7 1.1 1.7 1.1 1 .1 .7 2 .7 2 1.8 .3 2.7-1.2 2.7-1.2 .5-1 .8-1.4 .8-1.4-2.7-.3-5.6-1.4-5.6-6.2 0-1.4 .5-2.5 1.2-3.3-.1-.3-.5-1.6 .1-3.3 0 0 1-.3 3.4 1.3a11.6 11.6 0 0 1 6.2 0C18 5 19 5.3 19 5.3c .6 1.7 .2 3 .1 3.3 .8 .8 1.2 1.9 1.2 3.3 0 4.8-2.9 5.9-5.6 6.2 .4 .3 .8 1 .8 2.1v3c0 .3 .2 .6 .8 .5A12 12 0 0 0 12 .5Z"/></svg>
          <span class="sr-only">GitHub</span>
        </a>
      </div>
    </div>

    <!-- ===== Contact Modal ===== -->
    <dialog id="contactDialog" aria-labelledby="contactTitle">
      <div class="modal-header">
        <h3 id="contactTitle" class="modal-title">Contact</h3>
        <button class="modal-close" id="contactClose" aria-label="Close contact dialog">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M6.2 5l5.8 5.8L17.8 5 19 6.2 13.2 12 19 17.8 17.8 19 12 13.2 6.2 19 5 17.8 10.8 12 5 6.2 6.2 5z"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="contact-actions" aria-label="Quick links">
          <a class="btn btn-primary" href="https://calendly.com/isaacbmichael" target="_blank" rel="noopener noreferrer">Schedule on Calendly</a>

          <!-- Canonical Call/Text pill (shared with Home) -->
          <a
            class="btn call-link"
            data-phone="+12543666861"
            href="tel:+12543666861"
            aria-describedby="callTip"
          >
            Call or text
          </a>
          <span
            id="callTip"
            class="call-popover"
            data-popover
            hidden
            role="dialog"
            aria-label="Phone options"
          >
            <button
              type="button"
              class="call-popover__copy"
              data-copy-number="+12543666861"
              aria-label="Copy phone number"
            >
              +1 (254) 366-6861
            </button>
          </span>

          <a class="btn" href="https://www.linkedin.com/in/isaacbmichael" target="_blank" rel="noopener noreferrer">LinkedIn</a>
          <a class="btn" href="https://github.com/isaacbmichael" target="_blank" rel="noopener noreferrer">GitHub</a>
        </div>

        <div class="divider" aria-hidden="true"></div>

        <form id="quickForm" class="form-grid">
          <label for="qName">Name</label>
          <input id="qName" name="name" autocomplete="name" placeholder="Your name" />
          <label for="qEmail">Email</label>
          <input id="qEmail" name="email" type="email" autocomplete="email" placeholder="you@example.com" />
          <label for="qMsg">Message</label>
          <textarea id="qMsg" name="message" placeholder="Tell me a little about your project or request…"></textarea>

          <div class="form-actions">
            <button type="button" class="btn btn-outline" id="contactCancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Send via Email</button>
          </div>
          <small class="form-hint">Submitting opens your email client with your message pre-filled (no data is stored on this site).</small>
        </form>
      </div>
    </dialog>

    <script>
      /* ===== Mini helpers ===== */
      function $(sel){ return document.querySelector(sel) }
      function $all(sel){ return Array.prototype.slice.call(document.querySelectorAll(sel)) }

      /* Current year */
      (function(){ var y=document.getElementById('y'); if (y) y.textContent=new Date().getFullYear() })();

      /* Preload logos (keep warm cache too) */
      var logoFront = document.getElementById('logoFront');
      var logoBack  = document.getElementById('logoBack');
      function preload(src){ return new Promise(function(res){ var i=new Image(); i.onload=res; i.onerror=res; i.src=src; }); }
      if (logoFront && logoFront.dataset && logoFront.dataset.logoLight && logoFront.dataset.logoDark){
        Promise.all([ logoFront.dataset.logoLight, logoFront.dataset.logoDark ].map(preload));
      }

      /* Contact modal */
      var dialog = document.getElementById('contactDialog');
      var contactClose = document.getElementById('contactClose');
      var contactCancel= document.getElementById('contactCancel');
      var quickForm    = document.getElementById('quickForm');

      function openDialog(e){
        if (e) e.preventDefault();
        if (dialog && !dialog.open){
          if (typeof dialog.showModal === 'function') dialog.showModal();
          var main=$('main'), header=$('header.site-header'), dock=$('.mobile-dock');
          if (main) main.setAttribute('inert','');
          if (header) header.setAttribute('inert','');
          if (dock) dock.setAttribute('inert','');
          var nameEl=document.getElementById('qName'); if (nameEl) nameEl.focus();
        }
      }
      function closeDialog(e){
        if (e) e.preventDefault();
        if (dialog && dialog.open){
          dialog.close();
          var main=$('main'), header=$('header.site-header'), dock=$('.mobile-dock');
          if (main) main.removeAttribute('inert');
          if (header) header.removeAttribute('inert');
          if (dock) dock.removeAttribute('inert');
          var backTo = window.__lastFocused;
          if (backTo && backTo.focus) backTo.focus();
        }
      }

      /* Attach to ALL contact triggers (header + CTA) with graceful fallback */
      $all('[data-contact-open]').forEach(function(el){
        el.addEventListener('click', function(e){
          if (dialog && typeof dialog.showModal === 'function'){
            e.preventDefault();
            window.__lastFocused = el;
            openDialog(e);
          }
          /* else: let href navigate to /contact/ as fallback */
        });
      });

      if (contactClose) contactClose.addEventListener('click', closeDialog);
      if (contactCancel) contactCancel.addEventListener('click', closeDialog);
      if (dialog){
        dialog.addEventListener('click', function(e){ if (e.target === dialog) closeDialog(); });
        dialog.addEventListener('keydown', function(e){ if (e.key === 'Escape') closeDialog(); });
      }
      if (quickForm){
        var qName=document.getElementById('qName');
        var qEmail=document.getElementById('qEmail');
        var qMsg=document.getElementById('qMsg');
        quickForm.addEventListener('submit', function(e){
          e.preventDefault();
          var name=(qName && qName.value || '').trim();
          var email=(qEmail && qEmail.value || '').trim();
          var msg=(qMsg && qMsg.value || '').trim();
          var subject=encodeURIComponent('Website inquiry');
          var body=encodeURIComponent(msg + '\n\n— ' + name + (email ? ' <'+email+'>' : ''));
          window.location.href = 'mailto:isaac.b.michael@gmail.com?subject='+subject+'&body='+body;
          closeDialog();
        });
      }

      /* Mobile drawer */
      var drawer    = document.getElementById('mobileDrawer');
      var backdrop  = document.getElementById('drawerBackdrop');
      var menuBtn   = document.getElementById('menuToggle');
      var menuClose = document.getElementById('menuClose');

      function setAppInert(on){
        ['main','header.site-header','.hero-section','footer','.mobile-dock'].forEach(function(sel){
          var el=$(sel); if (!el) return; on ? el.setAttribute('inert','') : el.removeAttribute('inert');
        });
      }
      function trapFocusWithin(el){
        if (!el || el.__trapBound) return;
        el.__trapBound = true;
        el.addEventListener('keydown', function(e){
          if (e.key !== 'Tab') return;
          var f = el.querySelectorAll('a,button,[tabindex]:not([tabindex="-1"])');
          if (!f.length) return;
          var first=f[0], last=f[f.length-1];
          if (e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
          else if (!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
        });
      }
      function openDrawer(e){
        if (e) e.preventDefault();
        if (backdrop) backdrop.hidden = false;
        document.body.classList.add('drawer-open');
        if (drawer) drawer.setAttribute('aria-hidden','false');
        if (menuBtn) menuBtn.setAttribute('aria-expanded','true');
        setAppInert(true);
        if (drawer){ var firstLink=drawer.querySelector('a'); if (firstLink) firstLink.focus(); }
        trapFocusWithin(drawer);
      }
      function closeDrawer(e){
        if (e) e.preventDefault();
        document.body.classList.remove('drawer-open');
        if (drawer) drawer.setAttribute('aria-hidden','true');
        if (menuBtn) menuBtn.setAttribute('aria-expanded','false');
        setTimeout(function(){ if (backdrop) backdrop.hidden = true; }, 220);
        setAppInert(false);
        if (menuBtn && menuBtn.focus) menuBtn.focus();
      }
      if (menuBtn) menuBtn.addEventListener('click', openDrawer);
      if (menuClose) menuClose.addEventListener('click', closeDrawer);
      if (backdrop) backdrop.addEventListener('click', closeDrawer);
      if (drawer) $all('#mobileDrawer a').forEach(function(a){ a.addEventListener('click', function(){ closeDrawer(); }); });
      document.addEventListener('keydown', function(e){ if (e.key === 'Escape' && document.body.classList.contains('drawer-open')) closeDrawer(); });

      /* Brand link: spin once → home */
      var brandLink = document.getElementById('brandLink');
      if (brandLink){
        brandLink.addEventListener('click', function(e){
          e.preventDefault();
          var inner = brandLink.querySelector('.avatar-inner');

          if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches){
            window.location.href = '/';
            return;
          }

          if (inner){
            inner.style.setProperty('--spin','1turn');
            var go = function(){ window.location.href = '/'; };
            var done=false;
            inner.addEventListener('transitionend', function(evt){
              if (!done && evt.propertyName === 'transform'){ done=true; go(); }
            });
            setTimeout(go, 800);
          }else{
            window.location.href = '/';
          }
        });
      }

      /* Bars: dark while hero in view */
      var hero = document.querySelector('.hero-section');
      function setBarsDark(isDark){
        document.body.classList.toggle('bars-dark', isDark);
        if (logoFront && logoBack && logoFront.dataset){
          var src = isDark ? logoFront.dataset.logoDark : logoFront.dataset.logoLight;
          if (src){ logoFront.src = src; logoBack.src = src; }
        }
      }
      setBarsDark(true);
      if ('IntersectionObserver' in window && hero){
        var io = new IntersectionObserver(function(entries){
          entries.forEach(function(entry){ setBarsDark(entry.isIntersecting); });
        }, { threshold: 0 });
        io.observe(hero);
      }else{
        window.addEventListener('scroll', function(){ setBarsDark(window.scrollY < 60); });
      }

      /* Smooth glide for chips & the scroll arrow */
      (function(){
        var prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        $all('a.scroll-arrow, .chip-row a').forEach(function(a){
          a.addEventListener('click', function(e){
            var href = a.getAttribute('href') || '';
            if (href.charAt(0) !== '#') return;
            var id = href.slice(1);
            var target = document.getElementById(id);
            if (!target) return;
            e.preventDefault();
            if (target.scrollIntoView){
              target.scrollIntoView({
                behavior: prefersReduced ? 'auto' : 'smooth',
                block: 'start'
              });
            }
          });
        });
      })();

      /* Mark current page in both desktop nav and mobile drawer (parity with Home) */
      $all('nav.primary-nav a, .mobile-drawer nav a').forEach(function(a){
        try{
          var here = new URL(a.href, location.origin).pathname.replace(/\/+$/,'') || '/';
          var path = location.pathname.replace(/\/+$/,'') || '/';
          if (here === path) a.setAttribute('aria-current','page');
        }catch(_){}
      });

      /* Measure mobile dock height and set --dock-h so visible gap = 14px on mobile */
      (function(){
        function setDockVars(){
          var dock = document.querySelector('.mobile-dock');
          var h = dock ? dock.offsetHeight : 0; // includes safe-area inset
          document.documentElement.style.setProperty('--dock-h', h + 'px');
        }
        setDockVars();
        window.addEventListener('load', setDockVars);
        window.addEventListener('resize', setDockVars, { passive:true });
        window.addEventListener('orientationchange', setDockVars);
      })();

      /* PHOTO BADGE: 3D tilt + flip + rotating quotes */
      (function(){
        var badge = document.getElementById('photoBadge');
        var tilt  = document.getElementById('tiltWrap');
        var back  = document.getElementById('quoteFace');
        if (!badge || !tilt || !back) return;

        var quotes = [
          { t: "A mathematician, like a painter or a poet, is a maker of patterns.", a: "G. H. Hardy" },
          { t: "Mathematics is the art of giving the same name to different things.", a: "Henri Poincaré" },
          { t: "All models are wrong, but some are useful.", a: "George E. P. Box" },
          { t: "A wise man proportions his belief to the evidence.", a: "David Hume" },
          { t: "If I have seen further it is by standing on the shoulders of giants.", a: "Isaac Newton" },
          { t: "God does not play dice with the universe.", a: "Albert Einstein" },
          { t: "The first principle is that you must not fool yourself—and you are the easiest person to fool.", a: "Richard P. Feynman" },
          { t: "Nothing is too wonderful to be true, if it be consistent with the laws of nature.", a: "Michael Faraday" },
          { t: "The Analytical Engine weaves algebraic patterns just as the Jacquard loom weaves flowers and leaves.", a: "Ada Lovelace" },
          { t: "We can only see a short distance ahead, but we can see plenty there that needs to be done.", a: "Alan Turing" },
          { t: "Philosophy is written in that great book, the universe … it is written in the language of mathematics.", a: "Galileo Galilei" },
          { t: "Probability theory is nothing but common sense reduced to calculation.", a: "Pierre-Simon Laplace" },
          { t: "An approximate answer to the right question is worth far more than the exact answer to the wrong one.", a: "John W. Tukey" },
          { t: "The purpose of computing is insight, not numbers.", a: "Richard Hamming" },
          { t: "We must know — we will know!", a: "David Hilbert" },
          { t: "Mathematics, rightly viewed, possesses not only truth, but supreme beauty.", a: "Bertrand Russell" },
          { t: "Mathematics is the queen of the sciences and number theory is the queen of mathematics.", a: "Carl Friedrich Gauss" },
          { t: "Errors using inadequate data are much less than those using no data at all.", a: "Charles Babbage" },
          { t: "A new scientific truth does not triumph by convincing its opponents... but rather because its opponents eventually die.", a: "Max Planck" },
          { t: "Science is what we understand well enough to explain to a computer. Art is everything else we do.", a: "Donald E. Knuth" },
          { t: "God created the integers; all else is the work of man.", a: "Leopold Kronecker" },
          { t: "An equation means nothing to me unless it expresses a thought of God.", a: "Srinivasa Ramanujan" },
          { t: "Beware; for I am fearless, and therefore powerful.", a: "Mary Shelley" },
          { t: "When you have eliminated the impossible, whatever remains, however improbable, must be the truth.", a: "Arthur Conan Doyle" },
          { t: "I am large, I contain multitudes.", a: "Walt Whitman" },
          { t: "So we beat on, boats against the current, borne back ceaselessly into the past.", a: "F. Scott Fitzgerald" },
          { t: "Two roads diverged in a wood, and I— I took the one less traveled by...", a: "Robert Frost" },
          { t: "Call me Ishmael.", a: "Herman Melville" }
        ];

        var showingBack = false, idx = 0;
        var reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        /* Intro spin on each visit (for non–reduced-motion users). */
        var coin = badge.querySelector('.coin');
        var shouldSpin = !reduceMotion;

        if (shouldSpin && coin) {
          // Delay slightly so layout/IO observers settle (prevents jank)
          var startIntro = function(){
            // If user already flipped before timeout, skip.
            if (badge.classList.contains('is-flipped')) return;

            badge.classList.add('intro-spin');
            badge.setAttribute('aria-busy','true');

            var done = false;
            var cleanup = function(){
              if (done) return;
              done = true;
              badge.classList.remove('intro-spin');
              badge.removeAttribute('aria-busy');
              // 1turn ends where it starts, so no visual jump.
            };

    coin.addEventListener('animationend', cleanup, { once: true });
    setTimeout(cleanup, 1300); // Fallback
  };

  requestAnimationFrame(function(){ setTimeout(startIntro, 120); });
}

        function setTilt(rxDeg, ryDeg){
          tilt.style.setProperty('--rx', rxDeg + 'deg');
          tilt.style.setProperty('--ry', ryDeg + 'deg');
        }
        function onPointerMove(e){
          if (e.pointerType && e.pointerType !== 'mouse') return;
          var r = badge.getBoundingClientRect();
          var px = (e.clientX - r.left) / r.width;
          var py = (e.clientY - r.top) / r.height;
          var TILT = 10;
          var rx = (0.5 - py) * TILT;
          var ry = (px - 0.5) * TILT;
          setTilt(rx, ry);
        }
        function onLeave(){ setTilt(0, 0); }
        function injectQuote(){
          var q = quotes[idx % quotes.length]; idx++;
          back.innerHTML =
            '<div class="quote-wrap">' +
              '<div class="quote">' + q.t + '</div>' +
              '<div class="byline">— ' + q.a + '</div>' +
            '</div>';
        }
        function flip(){
          showingBack = !showingBack;
          if (showingBack){
            injectQuote();
            badge.classList.add('is-flipped');
            badge.setAttribute('aria-pressed','true');
          }else{
            badge.classList.remove('is-flipped');
            badge.setAttribute('aria-pressed','false');
          }
        }

        badge.addEventListener('pointermove', onPointerMove);
        badge.addEventListener('pointerleave', onLeave);
        badge.addEventListener('click', flip);
        badge.addEventListener('keydown', function(e){ if (e.key === 'Enter' || e.key === ' '){ e.preventDefault(); flip(); } });

        if (reduceMotion){
          badge.removeEventListener('pointermove', onPointerMove);
          badge.removeEventListener('pointerleave', onLeave);
          setTilt(0, 0);
        }
      })();

      /* Single-button Call/Text behavior with copy popover (parity with Home) */
      (function () {
        var UA = navigator.userAgent || '';
        var isMobile = /Android|iPhone|iPad|iPod/i.test(UA);
        var isMac = /Macintosh|Mac OS X/i.test(UA);
        var canLikelyCall = isMobile || isMac;

        /* Keep tel: href in sync with data-phone for all .call-link buttons */
        Array.prototype.forEach.call(
          document.querySelectorAll('.call-link[data-phone]'),
          function (a) {
            var ph = a.getAttribute('data-phone') || '';
            if (ph) a.setAttribute('href', 'tel:' + ph);
          }
        );

        /* Only enable fancy popover on hover/fine-pointer devices (desktop/laptop) */
        var mqHoverFine =
          window.matchMedia &&
          window.matchMedia('(hover:hover) and (pointer:fine)');
        if (!mqHoverFine || !mqHoverFine.matches) {
          // On touch/mobile, button is a plain tel: link
          return;
        }

        var callBtn = document.querySelector('#contactDialog .call-link[data-phone]');
        var pop = document.querySelector('#contactDialog [data-popover]');
        if (!callBtn || !pop) return;

        var copyBtn = pop.querySelector('.call-popover__copy');
        var phone =
          ((copyBtn && copyBtn.getAttribute('data-copy-number')) ||
            callBtn.getAttribute('data-phone') ||
            '').trim();

        function position() {
          var btnRect = callBtn.getBoundingClientRect();
          var row = callBtn.closest('.contact-actions').getBoundingClientRect();
          pop.style.left = (btnRect.left - row.left) + 'px';
        }

        function show() {
          pop.hidden = false;
          position();
        }
        function hide() {
          pop.hidden = true;
        }

        var refs = 0;
        var timer = null;

        function enter() {
          refs++;
          if (timer) clearTimeout(timer);
          show();
        }
        function leave() {
          refs = Math.max(0, refs - 1);
          if (!refs) {
            timer = setTimeout(hide, 200);
          }
        }

        ['mouseenter','focus'].forEach(function (evt) {
          callBtn.addEventListener(evt, enter);
        });
        ['mouseleave','blur'].forEach(function (evt) {
          callBtn.addEventListener(evt, leave);
        });
        pop.addEventListener('mouseenter', enter);
        pop.addEventListener('mouseleave', leave);
        pop.addEventListener('focusin', enter);
        pop.addEventListener('focusout', leave);

        window.addEventListener('resize', function () {
          if (!pop.hidden) position();
        }, { passive:true });

        function doCopy() {
          if (!phone) return;
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(phone).then(function () {
              if (!copyBtn) return;
              var prev = copyBtn.textContent;
              copyBtn.textContent = 'Copied';
              setTimeout(function () {
                copyBtn.textContent = prev;
              }, 1000);
            }).catch(function () {
              alert('Phone number: ' + (copyBtn ? copyBtn.textContent : phone));
            });
          } else {
            alert('Phone number: ' + (copyBtn ? copyBtn.textContent : phone));
          }
        }
        if (copyBtn) copyBtn.addEventListener('click', doCopy);

        if (!canLikelyCall) {
          callBtn.title =
            'Your computer may ask which app to use (Teams, Skype, etc.). Hover to copy the number.';
        }
      })();

      (function(){
        // Enhance every "call cluster"
        const clusters = document.querySelectorAll('.call-cluster');
        if (!clusters.length) return;

        const UA = navigator.userAgent || '';
        const isMobile = /Android|iPhone|iPad|iPod/i.test(UA);
        const isMac = /Macintosh|Mac OS X/i.test(UA);
        const canLikelyCall = isMobile || isMac; // dialer/FaceTime paths

        clusters.forEach(cluster => {
          const phone = cluster.getAttribute('data-phone') || '';
          const prettyEl = cluster.querySelector('[data-phonetext]');
          const prettyNumber = (prettyEl && prettyEl.textContent.trim()) || phone;

          // Wire up main anchors
          const callLink = cluster.querySelector('[data-call]');
          const smsLink  = cluster.querySelector('[data-sms]');
          const ftLink   = cluster.querySelector('[data-facetime]');
          const copyBtn  = cluster.querySelector('[data-copy]');

          if (callLink) callLink.href = `tel:${phone}`;
          if (smsLink)  smsLink.href  = `sms:${phone}`;

          // macOS → expose FaceTime Audio
          if (isMac && ftLink) {
            ftLink.hidden = false;
            ftLink.href = `facetime-audio://${phone}`;
            ftLink.setAttribute('rel','noopener');
          }

          // Desktop without a likely handler → show Copy (graceful fallback)
          if (!canLikelyCall) {
            if (copyBtn) copyBtn.hidden = false;
            // Optional: reveal "Text" if you want to encourage SMS from desktop apps that support it
            // smsLink && (smsLink.hidden = false);
            // Add a gentle title to set expectations
            callLink && callLink.setAttribute('title','Your computer may ask which app to use for calls (Teams, Skype, etc.).');
          }

          // Copy button behavior
          copyBtn && copyBtn.addEventListener('click', async () => {
            try {
              await navigator.clipboard.writeText(phone);
              const prev = copyBtn.textContent;
              copyBtn.textContent = 'Copied';
              setTimeout(()=> copyBtn.textContent = prev, 1200);
            } catch(_) {
              // Clipboard blocked → show an alert as last resort
              alert('Phone number: ' + prettyNumber);
            }
          });
        });
      })();
    </script>
  </body>
</html>
